/* src/components/PetalRain.css */

/* 疊在目標區塊上；只在該區塊內下落 */
.petal-layer {
  position: absolute;
  inset: 0;
  pointer-events: none;
  overflow: hidden;
  z-index: 5;
  opacity: 0;
  transition: opacity .25s ease;
}
.petal-layer.on { opacity: 1; }

/* 外層：負責垂直落下（用 top%，相對容器高度） */
.petal {
  position: absolute;
  top: -10%;              /* 從區塊頂上方 10% 開始 */
  left: var(--left, 50%); /* 0%~100%，由 JS 設定 */
  will-change: top;
  animation: petal-fall var(--fall, 10s) linear var(--delay, 0s) forwards;
}

/* 內層：負責左右擺動（transform: translateX） */
.petal-img {
  display: block;
  width: var(--size, 25px);
  height: auto;
  opacity: .96;
  will-change: transform;
  animation: petal-sway var(--sway, 3s) ease-in-out var(--delay, 0s) infinite alternate;
}

/* ❶ 垂直落下：以「容器高度 %」為基準（top 屬性） */
@keyframes petal-fall {
  0%   { top: -10%; }
  100% { top: 120%; }   /* 落出容器底部一點，確保完全離開畫面 */
}

/* ❷ 左右擺動（X 位移不影響 Y） */
@keyframes petal-sway {
  0%   { transform: translateX(calc(var(--amp, 30px) * -1)); }
  100% { transform: translateX(calc(var(--amp, 30px))); }
}

/* 使用者偏好減少動態：直接關閉花瓣層 */
@media (prefers-reduced-motion: reduce) {
  .petal-layer { display: none; }
}
